<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python —É –±—Ä–∞—É–∑–µ—Ä—ñ</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.0/full/pyodide.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; display: flex; flex-direction: column; min-height: 100vh; overflow: hidden; }
        textarea { width: 100%; height: 200px; font-size: 16px; }
        pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
        footer { background: #222; color: white; padding: 15px; margin-top: auto; text-align: center; width: 100vw; position: fixed; left: 0; bottom: 0;}
        footer a { color: #f4d03f; text-decoration: none; }
        footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h2>Python —É –±—Ä–∞—É–∑–µ—Ä—ñ</h2>
    <textarea id="code">print("–ü—Ä–∏–≤—ñ—Ç, Python!")</textarea>
    <button onclick="runPython()">–ó–∞–ø—É—Å—Ç–∏—Ç–∏</button>
    <button onclick="installPackage()">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞–∫–µ—Ç</button>
    <input type="text" id="package" placeholder="numpy, pandas, requests...">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
    <pre id="output">–û—á—ñ–∫—É—é –∫–æ–¥...</pre>

    <script>
        async function loadPyodideAndRun() {
            window.pyodide = await loadPyodide();
            console.log("‚úÖ Pyodide –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!");
        }
        loadPyodideAndRun();

        async function runPython() {
            let code = document.getElementById("code").value;
            let outputElement = document.getElementById("output");
            
            try {
                window.pyodide.runPython(`
import sys
from io import StringIO
sys.stdout = StringIO()  # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ print() –≤ —Ä—è–¥–æ–∫
`);

                await window.pyodide.runPythonAsync(code);

                let output = window.pyodide.runPython("sys.stdout.getvalue()");
                outputElement.innerText = output || "‚ö†Ô∏è –ù–µ–º–∞—î –≤–∏–≤–æ–¥—É (–º–æ–∂–ª–∏–≤–æ, –Ω–µ–º–∞—î print)";
            } catch (error) {
                outputElement.innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞: " + error;
            }
        }

        async function installPackage() {
            let packageName = document.getElementById("package").value;
            let outputElement = document.getElementById("output");

            if (!packageName) {
                outputElement.innerText = "‚ö†Ô∏è –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø–∞–∫–µ—Ç–∞!";
                return;
            }

            try {
                outputElement.innerText = `‚è≥ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞: ${packageName}...`;
                await pyodide.loadPackage(packageName);
                outputElement.innerText = `‚úÖ "${packageName}" –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!`;
            } catch (error) {
                outputElement.innerText = `‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è: ${error}`;
            }
        }
    </script>

    <!-- üìå –§—É—Ç–µ—Ä –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º–∏ –ø—Ä–æ Pyodide -->
    <footer>
        <h3>‚ÑπÔ∏è –í–∞–∂–ª–∏–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ Pyodide –≤—ñ–¥ –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ Python</h3>
        <ul style="text-align: left; max-width: 600px; margin: auto;">
            <li>üöÄ Pyodide –ø—Ä–∞—Ü—é—î **–±–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è** ‚Äì –ø—Ä—è–º–æ —É –±—Ä–∞—É–∑–µ—Ä—ñ!</li>
            <li>‚ö° **–ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î `pip install`**, –ø–∞–∫–µ—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `pyodide.loadPackage()`</li>
            <li>üåê **–î–ª—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å `requests` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π** <a href="https://pyodide.org/en/stable/usage/api/python-api.html#module-pyodide.http" target="_blank">`pyodide.http.pyfetch()`</a></li>
            <li>üì¶ –ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –ª–∏—à–µ **–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, —â–æ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω—ñ –¥–ª—è Pyodide**</li>
            <li>üñ•Ô∏è **–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤ —Å–∏—Å—Ç–µ–º–∏ (`os`, `open()`)**, –±–æ –∫–æ–¥ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ</li>
        </ul>
        <p>üîó –û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: <a href="https://pyodide.org/en/stable/" target="_blank">Pyodide.org</a></p>
    </footer>
</body>
</html>
