<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <title>Python —É –±—Ä–∞—É–∑–µ—Ä—ñ</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.0/full/pyodide.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/python/python.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-weight: bold;
            font-family: "Source Code Pro", serif;
            font-optical-sizing: auto;
        }
        h1 { background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet); background-clip: text; color: transparent; background-size: 0.25ch; background-repeat: repeat; }
        u::after { position: absolute; top: 0; left: 0; height: 0.1rem; width: 100%; content: ""; background: linear-gradient(135deg, red, orange, yellow, green, cyan, blue, violet); }
        html { font-size: 1.5vmax; }
        body { font-family: Arial, sans-serif; padding: 0 20px; display: flex; flex-direction: column; min-height: 100vh; overflow: hidden; }
        #editor { height: 42.5vh; border: 1px solid #ccc; }
        .CodeMirror { height: 100%; font-size: 1rem; }
        button { font-size: 1rem; margin-top: 10px; }
        input { zoom: 2; }
        pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
        footer { background: #222; color: white; padding: 15px; margin-top: auto; text-align: center; width: 100vw; position: fixed; left: 0; bottom: 0; font-size: 0.75rem;}
        footer a { color: #f4d03f; text-decoration: none; }
        footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>
        <img src="https://s3.dualstack.us-east-2.amazonaws.com/pythondotorg-assets/media/community/logos/python-logo-only.png" alt="Logo device only" style="width: 1rem; transform: scale(1.5);">
        <u>Python</u>
        <small>—É –±—Ä–∞—É–∑–µ—Ä—ñ</small>
    </h1>
    <div id="editor" placeholder=`print("–ü—Ä–∏–≤—ñ—Ç, Python!")`></div>
    <button onclick="runPython()">–ó–∞–ø—É—Å—Ç–∏—Ç–∏</button>
    <button onclick="installPackage()">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞–∫–µ—Ç</button>
    <input type="text" id="package" placeholder="numpy, pandas, requests...">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
    <pre id="output">–û—á—ñ–∫—É—é –∫–æ–¥...</pre>

    <script>
        let editor = CodeMirror(document.getElementById("editor"), {
            mode: "python",
            lineNumbers: true,
            theme: "default",
            indentUnit: 4,
            tabSize: 4
        });

        editor.setValue('print("–ü—Ä–∏–≤—ñ—Ç, Python!")');

        async function loadPyodideAndRun() {
            let outputElement = document.getElementById("output");
            outputElement.innerText = "‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Pyodide...";

            try {
                window.pyodide = await loadPyodide();
                outputElement.innerText = "‚úÖ Pyodide –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!";
            } catch (error) {
                console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Pyodide:", error);
                outputElement.innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Pyodide: " + error;
                return; // –í–∏—Ö—ñ–¥, —è–∫—â–æ Pyodide –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è
            }

            // –Ø–∫—â–æ –≤—Å–µ –æ–∫ ‚Äî –æ—á–∏—â–∞—î–º–æ
            setTimeout(() => {
                outputElement.innerText = "";
            }, 1000);
        }
        loadPyodideAndRun();

        async function runPython() {
            let code = editor.getValue();
            let outputElement = document.getElementById("output");

            try {
                window.pyodide.runPython(`
import sys
from io import StringIO
sys.stdout = StringIO()
`);

                await window.pyodide.runPythonAsync(code);

                let output = window.pyodide.runPython("sys.stdout.getvalue()");
                outputElement.innerText = output || "‚ö†Ô∏è –ù–µ–º–∞—î –≤–∏–≤–æ–¥—É (–º–æ–∂–ª–∏–≤–æ, –Ω–µ–º–∞—î print)";
            } catch (error) {
                outputElement.innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞: " + error;
            }
        }

        async function installPackage() {
            let packageName = document.getElementById("package").value;
            let outputElement = document.getElementById("output");

            if (!packageName) {
                outputElement.innerText = "‚ö†Ô∏è –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø–∞–∫–µ—Ç–∞!";
                return;
            }

            try {
                outputElement.innerText = `‚è≥ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç–∞: ${packageName}...`;
                await pyodide.loadPackage(packageName);
                outputElement.innerText = `‚úÖ "${packageName}" –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!`;
            } catch (error) {
                outputElement.innerText = `‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è: ${error}`;
            }
        }
    </script>

    <footer>
        <h3>‚ÑπÔ∏è –í–∞–∂–ª–∏–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ Pyodide –≤—ñ–¥ –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ Python</h3>
        <ul style="text-align: left; max-width: 600px; margin: auto;">
            <li>üöÄ Pyodide –ø—Ä–∞—Ü—é—î **–±–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è** ‚Äì –ø—Ä—è–º–æ —É –±—Ä–∞—É–∑–µ—Ä—ñ!</li>
            <li>‚ö° **–ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î `pip install`**, –ø–∞–∫–µ—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `pyodide.loadPackage()`</li>
            <li>üåê **–î–ª—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å `requests` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π** <a href="https://pyodide.org/en/stable/usage/api/python-api.html#module-pyodide.http" target="_blank">`pyodide.http.pyfetch()`</a></li>
            <li>üì¶ –ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –ª–∏—à–µ **–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, —â–æ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω—ñ –¥–ª—è Pyodide**</li>
            <li>üñ•Ô∏è **–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤ —Å–∏—Å—Ç–µ–º–∏ (`os`, `open()`)**, –±–æ –∫–æ–¥ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ</li>
        </ul>
        <p>üîó –û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: <a href="https://pyodide.org/en/stable/" target="_blank">Pyodide.org</a></p>
    </footer>
</body>
</html>
